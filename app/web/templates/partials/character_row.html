<tr id="character-row-{{ c.id }}">
  <td class="px-3 py-2 font-medium">
    {{ linkify_mentions(c.name) }}
    {% if c.traits or c.arc %}
      <details class="mt-1">
        <summary class="cursor-pointer text-xs text-slate-400">details</summary>
        {% if c.traits %}
          <div class="mt-2 text-xs text-slate-200 whitespace-pre-wrap">
            <span class="text-slate-400">Traits:</span> {{ linkify_mentions(c.traits) }}
          </div>
        {% endif %}
        {% if c.arc %}
          <div class="mt-2 text-xs text-slate-200 whitespace-pre-wrap">
            <span class="text-slate-400">Arc:</span> {{ linkify_mentions(c.arc) }}
          </div>
        {% endif %}
      </details>
    {% endif %}
  </td>
  <td class="px-3 py-2 text-slate-300">{{ c.status }}</td>
  <td class="px-3 py-2 text-slate-300">{{ c.importance }}</td>
  <td class="px-3 py-2 text-slate-300">
    {% if tags|length == 0 %}
      <span class="text-slate-500">—</span>
    {% else %}
      {{ tags|join(", ") }}
    {% endif %}
  </td>
  <td class="px-3 py-2">
    {% if c.is_incomplete %}
      <span class="rounded bg-amber-500/20 px-2 py-1 text-xs text-amber-200">incomplete</span>
    {% else %}
      <span class="text-slate-500 text-xs">—</span>
    {% endif %}
  </td>
  <td class="px-3 py-2 text-right whitespace-nowrap">
    <button
      class="rounded border border-slate-700 px-2 py-1 text-xs text-slate-200 hover:bg-slate-900"
      hx-get="/codex/characters/{{ c.id }}/edit"
      hx-target="#character-row-{{ c.id }}"
      hx-swap="outerHTML"
    >
      edit
    </button>
    <button
      class="ml-2 rounded border border-slate-700 px-2 py-1 text-xs text-slate-200 hover:bg-slate-900"
      hx-post="/codex/characters/{{ c.id }}/toggle_incomplete"
      hx-target="#character-table"
      hx-swap="innerHTML"
    >
      toggle incomplete
    </button>
    <button
      class="ml-2 rounded border border-slate-700 px-2 py-1 text-xs text-slate-200 hover:bg-slate-900"
      hx-post="/codex/characters/{{ c.id }}/delete"
      hx-target="#character-table"
      hx-swap="innerHTML"
      hx-confirm="Delete {{ c.name }}?"
    >
      delete
    </button>
  </td>
</tr>


