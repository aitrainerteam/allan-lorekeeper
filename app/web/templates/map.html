{% extends "base.html" %}

{% block content %}
{% if is_development %}
<!-- Development mode: Embed Vite dev server in iframe -->
<iframe
  src="{{ vite_dev_url }}"
  style="width: 100%; height: 100%; border: none;"
  title="World Map"
></iframe>
{% else %}
<!-- Production mode: Load built assets directly -->
<div id="root"></div>
<link rel="stylesheet" href="{{ map_css }}">
<script type="module" src="{{ map_js }}"></script>
{% endif %}

<style>
  html,
  body {
    height: 100%;
    margin: 0;
    overflow: hidden;
    background-color: #111;
  }

  /* Force the base layout wrapper to be full viewport height */
  body>div.min-h-screen.flex {
    height: 100vh;
    min-height: 0;
    /* Override min-h-screen */
  }

  /* Reset main container from base.html */
  main.flex-1 {
    padding: 0 !important;
    /* Remove p-6 */
    flex: 1;
    display: flex;
    flex-direction: column;
    overflow: hidden;
  }

  /* Reset inner div from base.html */
  main>div {
    max-width: none !important;
    /* Remove max-w-5xl */
    width: 100%;
    height: 100%;
    flex: 1;
    display: flex;
    flex-direction: column;
  }

  /* Use relative positioning to fill the available flex space */
  #root {
    position: relative;
    width: 100%;
    height: 100%;
    z-index: 1;
  }

  canvas {
    image-rendering: pixelated;
    background-color: #111;
  }
</style>
{% endblock %}